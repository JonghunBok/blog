{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{169:function(e,t,s){\"use strict\";s.r(t);var n=s(28),r=Object(n.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[s(\"p\",[e._v(\"모듈에 대해 정확히 이해해야 프로젝트를 하는데 용이할 것\\n같아 기본적인 내용을 공부하며 정리하고자 한다.\\nJavascript 언어 자체에서 모듈을 지원하기 시작한 것은\\nECMAScript 6가 처음이다.\\nECMAScript 5까지는 모듈 기능을 구현한 라이브러리를\\n이용해왔다. 이 라이브러리들을 나름의 스탠다드를\\n구현하고 있는데,\\n개중에 중요한 2개는 Node.js의 코어모듈로 구현돼있는\\nCommonJS와 Require.js로 구현돼있는 AMD라고 한다.\")]),e._v(\" \"),s(\"table\",[s(\"thead\",[s(\"tr\",[s(\"th\",[e._v(\"스탠다드\")]),e._v(\" \"),s(\"th\",[e._v(\"키워드\")])])]),e._v(\" \"),s(\"tbody\",[s(\"tr\",[s(\"td\",[e._v(\"CommonJS\")]),e._v(\" \"),s(\"td\",[s(\"code\",[e._v(\"require()\")]),e._v(\", \"),s(\"code\",[e._v(\"module.exports\")])])]),e._v(\" \"),s(\"tr\",[s(\"td\",[e._v(\"AMD \"),s(\"sub\",[e._v(\"Async Module Definition\")])]),e._v(\" \"),s(\"td\",[s(\"code\",[e._v(\"require()\")]),e._v(\", \"),s(\"code\",[e._v(\"define()\")])])]),e._v(\" \"),s(\"tr\",[s(\"td\",[e._v(\"UMD \"),s(\"sub\",[e._v(\"Univeral Module Definition\")])]),e._v(\" \"),s(\"td\",[e._v(\"즉시실행함수와 \"),s(\"code\",[e._v(\"this\")]),e._v(\" 활용\")])]),e._v(\" \"),s(\"tr\",[s(\"td\",[e._v(\"ES6\")]),e._v(\" \"),s(\"td\",[s(\"code\",[e._v(\"import\")]),e._v(\", \"),s(\"code\",[e._v(\"export\")])])])]),e._v(\" \"),s(\"caption\",{attrs:{id:\"js_module_standard_types\"}},[e._v(\"JS 모듈 스탠다드 종류\")])]),e._v(\" \"),s(\"br\"),e._v(\" \"),s(\"p\",[e._v(\"ECMA6의 모듈 스펙은 노드에서는 8.5.0버전에서부터\\n일찍이 구현되어있지만, IE와 Samsung Internet 에서는\\n지원하지 않고 있다.\"),s(\"sup\",{staticClass:\"footnote-ref\"},[s(\"a\",{attrs:{href:\"#fn1\",id:\"fnref1\"}},[e._v(\"[1]\")])]),e._v(\"\\n나는 NPM과 Node에 익숙해지고 싶은 것이니,\\n우선은 CommonJS 위주로 정리를 했다.\\n거기에 package.json에 대해서도 간단히 조사했다.\")]),e._v(\" \"),s(\"h2\",{attrs:{id:\"commonjs\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#commonjs\"}},[e._v(\"#\")]),e._v(\" CommonJS\")]),e._v(\" \"),s(\"p\",[e._v(\"Node.js 공식 API 레퍼런스 문서에서 Modules란에 가면\\nCommonJS 모듈에 대한 설명이 나온다.\\nNode.js 에서 자체적으로 CommonJS 스탠다드를 구현해\\n코어 모듈로 사용해왔기 때문이다.\\n깃허브에서 보면 다음과 같다.\\n깃헙 레파지토리에서 module 코어 모듈을 들춰보면 다음과 같다.\")]),e._v(\" \"),s(\"div\",{staticClass:\"language-js extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"// node/lib/module.js\")]),e._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v(\"'use strict'\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\";\")]),e._v(\"\\nmodule\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\".\")]),e._v(\"exports \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"require\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v(\"'internal/modules/cjs/loader'\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\".\")]),e._v(\"Module\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\";\")]),e._v(\"\\n\")])])]),s(\"p\",[s(\"code\",[e._v(\"internal/modules/\")]),e._v(\"에 가면 CommonJS를 뜻하는 cjs말고도\\nECMAScript Module을 구현한 esm도 있다.\\n아직 cjs를 기본 로더로 사용하고 있는 모습이 인상적이다.\")]),e._v(\" \"),s(\"h3\",{attrs:{id:\"어떤-것이-모듈로-취급되는가\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#어떤-것이-모듈로-취급되는가\"}},[e._v(\"#\")]),e._v(\" 어떤 것이 모듈로 취급되는가\")]),e._v(\" \"),s(\"p\",[e._v(\"각 파일은 하나의 모듈로 취급된다.\\n이는 ECMAScript 모듈에서도 변하지 않는다.\\n모듈의 크기가 커지면 폴더를 만들어\\n모듈을 구성하게 되는데,\\n폴더를 require의 인자로 넘기는 방법은 3가지가 있다.\")]),e._v(\" \"),s(\"ol\",[s(\"li\",[s(\"p\",[e._v(\"최상위 폴더의 \"),s(\"code\",[e._v(\"package.json\")]),e._v(\"에 \"),s(\"code\",[e._v(\"main\")]),e._v(\" 프로퍼티를 명시한다. \"),s(\"br\"),e._v(\"\\nNode에게 엔트리 포인트를 알려주는 것이다.\")])]),e._v(\" \"),s(\"li\",[s(\"p\",[e._v(\"폴더 안에 \"),s(\"code\",[e._v(\"index.js\")]),e._v(\"파일을 포함시키는 것. \"),s(\"br\"),e._v(\"\\n만약 \"),s(\"code\",[e._v(\"package.json\")]),e._v(\"에 \"),s(\"code\",[e._v(\"main\")]),e._v(\"값이 없다면\\nNode.js는 \"),s(\"code\",[e._v(\"index.js\")]),e._v(\" 또는 \"),s(\"code\",[e._v(\"index.node\")]),e._v(\"파일을 찾으려고 한다.\")])]),e._v(\" \"),s(\"li\",[s(\"p\",[e._v(\"2번과 똑같이 \"),s(\"code\",[e._v(\"index.node\")]),e._v(\"를 포함시키는 것.\")])])]),e._v(\" \"),s(\"h3\",{attrs:{id:\"모듈-래퍼module-wrapper\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#모듈-래퍼module-wrapper\"}},[e._v(\"#\")]),e._v(\" 모듈 래퍼\"),s(\"sub\",[e._v(\"module wrapper\")])]),e._v(\" \"),s(\"p\",[e._v(\"Node.js는 모듈 안에 있는 코드를 실행하기 전에\\n아래와 같은 래퍼\"),s(\"sub\",[e._v(\"wrapper\")]),e._v(\"를 만들어 감싼다고 한다.\")]),e._v(\" \"),s(\"div\",{staticClass:\"language-js extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[e._v(\"function\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token parameter\"}},[e._v(\"exports\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\",\")]),e._v(\" require\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\",\")]),e._v(\" module\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\",\")]),e._v(\" __filename\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\",\")]),e._v(\" __dirname\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\")\")]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"{\")]),e._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"// Module code actually lives in here\")]),e._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"}\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\";\")]),e._v(\"\\n\\n\")])])]),s(\"p\",[e._v(\"이럼으로써 모듈에 정의된 전역변수들이\\n호출되어온 곳의 메모리 공간을 더럽히지 않게 된다.\\n그리고 모듈에 로컬한 변수들은 프라이빗 변수가 된다.\")]),e._v(\" \"),s(\"h3\",{attrs:{id:\"core-modules\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#core-modules\"}},[e._v(\"#\")]),e._v(\" Core Modules\")]),e._v(\" \"),s(\"p\",[e._v(\"Node.js는 바이너리로 컴파일된 핵심 모듈들을 가진다.\\nNode.js소스 안에 lib/ 폴더 안에 정의돼 있으며\\n(바이너리로 컴파일 된 버전은 다른 폴더에 있는 듯하다)\\n\"),s(\"code\",[e._v(\"require\")]),e._v(\" 함수에 다른 모듈보다 선호되기 때문에\\n같은 이름을 가진 모듈이 있다고 해도\\n핵심 모듈이 로드 된다.\\nlib 폴더에 들어가보면 다음의 파일들을 볼 수 있다.\\n\")]),s(\"details\",[s(\"summary\",[e._v(\"lib 폴더 보기\")]),e._v(\" \"),s(\"p\"),e._v(\" \"),s(\"ul\",[s(\"li\",[e._v(\"assert.js\")]),e._v(\" \"),s(\"li\",[e._v(\"async_hooks.js\")]),e._v(\" \"),s(\"li\",[e._v(\"buffer.js\")]),e._v(\" \"),s(\"li\",[e._v(\"child_process.js\")]),e._v(\" \"),s(\"li\",[e._v(\"cluster.js\")]),e._v(\" \"),s(\"li\",[e._v(\"console.js\")]),e._v(\" \"),s(\"li\",[e._v(\"constants.js\")]),e._v(\" \"),s(\"li\",[e._v(\"crypto.js\")]),e._v(\" \"),s(\"li\",[e._v(\"dgram.js\")]),e._v(\" \"),s(\"li\",[e._v(\"dns.js\")]),e._v(\" \"),s(\"li\",[e._v(\"domain.js\")]),e._v(\" \"),s(\"li\",[e._v(\"events.js\")]),e._v(\" \"),s(\"li\",[s(\"strong\",[e._v(\"fs.js\")])]),e._v(\" \"),s(\"li\",[s(\"strong\",[e._v(\"http.js\")])]),e._v(\" \"),s(\"li\",[e._v(\"http2.js\")]),e._v(\" \"),s(\"li\",[e._v(\"https.js\")]),e._v(\" \"),s(\"li\",[e._v(\"inspector.js\")]),e._v(\" \"),s(\"li\",[e._v(\"module.js\")]),e._v(\" \"),s(\"li\",[e._v(\"net.js\")]),e._v(\" \"),s(\"li\",[s(\"strong\",[e._v(\"os.js\")])]),e._v(\" \"),s(\"li\",[s(\"strong\",[e._v(\"path.js\")])]),e._v(\" \"),s(\"li\",[e._v(\"perf_hooks.js\")]),e._v(\" \"),s(\"li\",[e._v(\"process.js\")]),e._v(\" \"),s(\"li\",[e._v(\"punycode.js\")]),e._v(\" \"),s(\"li\",[s(\"strong\",[e._v(\"querystring.js\")])]),e._v(\" \"),s(\"li\",[e._v(\"readline.js\")]),e._v(\" \"),s(\"li\",[e._v(\"repls.js\")]),e._v(\" \"),s(\"li\",[e._v(\"stream.js\")]),e._v(\" \"),s(\"li\",[e._v(\"stirng_decoder.js\")]),e._v(\" \"),s(\"li\",[e._v(\"sys.js\")]),e._v(\" \"),s(\"li\",[e._v(\"timers.js\")]),e._v(\" \"),s(\"li\",[e._v(\"tls.js\")]),e._v(\" \"),s(\"li\",[e._v(\"trace_events.js\")]),e._v(\" \"),s(\"li\",[e._v(\"tty.js\")]),e._v(\" \"),s(\"li\",[s(\"strong\",[e._v(\"url.js\")])]),e._v(\" \"),s(\"li\",[s(\"strong\",[e._v(\"util.js\")])]),e._v(\" \"),s(\"li\",[e._v(\"v8.js\")]),e._v(\" \"),s(\"li\",[e._v(\"vm.js\")]),e._v(\" \"),s(\"li\",[e._v(\"woker_threads.js\")]),e._v(\" \"),s(\"li\",[e._v(\"zlib.js\")])]),e._v(\" \"),s(\"p\")]),e._v(\" \"),s(\"h2\",{attrs:{id:\"package-json\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#package-json\"}},[e._v(\"#\")]),e._v(\" package.json\")]),e._v(\" \"),s(\"p\",[e._v(\"NPM 패키지를 소비하든 제작하든 package.json 문해력은\\n패키지의 메타정보에 쉽게 접근할 수 있게 해준다.\\nNPM 공식 문서에서 기본적인 정보를 추려 정리했다.\")]),e._v(\" \"),s(\"p\",[e._v(\"패키지를 후에 배포할 거라면,\\n\"),s(\"code\",[e._v(\"name\")]),e._v(\" 과 \"),s(\"code\",[e._v(\"version\")]),e._v(\" 필드가 요구된다.\\n\"),s(\"code\",[e._v(\"version\")]),e._v(\"필드는 Semantic Versioning 2.0.0을 따라\\n작성하면 된다.\")]),e._v(\" \"),s(\"blockquote\",[s(\"p\",[s(\"strong\",[e._v(\"Semantic Versioning 2.0.0\")]),e._v(\"에 따르면\\nMAJOR.MINOR.PATCH의 형식을 따르고,\\nMAJOR는 양립할 수 없는 API의 변화가 따를 때,\\nMINOR는 구버전과 양립할 수 있는 기능이 추가될 때,\\nPATCH는 구버전과 양립할 수 있는 버그 픽스를 할 때\\n증가한다.\")])]),e._v(\" \"),s(\"p\",[s(\"code\",[e._v(\"files\")]),e._v(\"는 \"),s(\"code\",[e._v(\".gitigonre\")]),e._v(\"와 비슷하지만 반대이다.\\n깃이그노어가 블랙리스트라면,\\n\"),s(\"code\",[e._v(\"files\")]),e._v(\"필드의 배열은 화이트리스트이다.\\n기본값은 모든 파일을 포함시키는 \"),s(\"code\",[e._v('[\"*\"]')]),e._v(\".\\n\"),s(\"code\",[e._v(\".npmignore\")]),e._v(\" 파일도 있고, \"),s(\"code\",[e._v(\".gitigonre\")]),e._v(\"와 똑같이\\n작용한다. 없으면 깃이그노어가 npm이그노어를 대신한다.\")]),e._v(\" \"),s(\"p\",[s(\"code\",[e._v(\"bin\")]),e._v(\"에 실행파일을 놓으면 \"),s(\"code\",[e._v(\"usr/local/bin/\")]),e._v(\"아래 심볼링링크가 생긴다.\\n\"),s(\"code\",[e._v(\"http-server\")]),e._v(\"와 같은 bash에서 바로 쓸 수 있는\\nNPM 패키지들을 보면 이 항목을 활용하는 것을 볼 수 있다.\"),s(\"sup\",{staticClass:\"footnote-ref\"},[s(\"a\",{attrs:{href:\"#fn2\",id:\"fnref2\"}},[e._v(\"[2]\")])])]),e._v(\" \"),s(\"h2\",{attrs:{id:\"얻은-것들rule-of-thumbs\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#얻은-것들rule-of-thumbs\"}},[e._v(\"#\")]),e._v(\" 얻은 것들\"),s(\"sub\",[e._v(\"rule of thumbs\")])]),e._v(\" \"),s(\"p\",[e._v(\"조사하며 얻은 실용적인 교훈은 다음과 같다.\")]),e._v(\" \"),s(\"ul\",[s(\"li\",[e._v(\"코어 모듈은 리콰이어에서 높은 우선순위를 갖는다.\")]),e._v(\" \"),s(\"li\",[s(\"code\",[e._v(\"require\")]),e._v(\"함수는 주어진 모듈 identifier를 상위폴더로 가며\\n가장 먼저 찾은 node_modules폴더 안에서 찾는다.\")]),e._v(\" \"),s(\"li\",[s(\"code\",[e._v(\"package.json\")]),e._v(\"의 \"),s(\"code\",[e._v(\"main\")]),e._v(\" 프로퍼티를 활용해 코어 결과물을\\n배포하면 되겠다.\")]),e._v(\" \"),s(\"li\",[e._v(\"트리쉐이킹\"),s(\"sub\",[e._v(\"tree shaking\")]),e._v(\"은 정적 구조의 모듈을 갖는\\nesm부터 가능하구나.\")])]),e._v(\" \"),s(\"h2\",{attrs:{id:\"참조\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#참조\"}},[e._v(\"#\")]),e._v(\" 참조\")]),e._v(\" \"),s(\"ul\",[s(\"li\",[s(\"a\",{attrs:{href:\"http://exploringjs.com/es6/ch_modules.html#static-module-structure\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"ExploringJS.com: Modules\"),s(\"OutboundLink\")],1)]),e._v(\" \"),s(\"li\",[s(\"a\",{attrs:{href:\"https://www.freecodecamp.org/news/anatomy-of-js-module-systems-and-building-libraries-fadcd8dbd0e/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"freeCodeCamp: Learn the basics of the JavaScript module system and build your own library\"),s(\"OutboundLink\")],1)]),e._v(\" \"),s(\"li\",[s(\"a\",{attrs:{href:\"https://nodejs.org/api/modules.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Node Official Documents\"),s(\"OutboundLink\")],1)]),e._v(\" \"),s(\"li\",[s(\"a\",{attrs:{href:\"https://github.com/nodejs/node/tree/master/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Node github repository\"),s(\"OutboundLink\")],1)]),e._v(\" \"),s(\"li\",[s(\"a\",{attrs:{href:\"http://fredkschott.com/post/2014/06/require-and-the-module-system/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"require and the module system\"),s(\"OutboundLink\")],1)]),e._v(\" \"),s(\"li\",[s(\"a\",{attrs:{href:\"https://docs.npmjs.com/files/package.json.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"NPM Official Documents: package.json\"),s(\"OutboundLink\")],1)]),e._v(\" \"),s(\"li\",[s(\"a\",{attrs:{href:\"https://semver.org/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Semantic Versioning 2.0.0\"),s(\"OutboundLink\")],1)])]),e._v(\" \"),s(\"hr\",{staticClass:\"footnotes-sep\"}),e._v(\" \"),s(\"section\",{staticClass:\"footnotes\"},[s(\"ol\",{staticClass:\"footnotes-list\"},[s(\"li\",{staticClass:\"footnote-item\",attrs:{id:\"fn1\"}},[s(\"p\",[s(\"a\",{attrs:{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"MDN: import\"),s(\"OutboundLink\")],1),e._v(\" \"),s(\"a\",{staticClass:\"footnote-backref\",attrs:{href:\"#fnref1\"}},[e._v(\"↩︎\")])])]),e._v(\" \"),s(\"li\",{staticClass:\"footnote-item\",attrs:{id:\"fn2\"}},[s(\"p\",[s(\"a\",{attrs:{href:\"https://github.com/indexzero/http-server/blob/master/package.json\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"http-server: package.json\"),s(\"OutboundLink\")],1),e._v(\" \"),s(\"a\",{staticClass:\"footnote-backref\",attrs:{href:\"#fnref2\"}},[e._v(\"↩︎\")])])])])])])}),[],!1,null,null,null);t.default=r.exports}}]);","extractedComments":[]}